-- =====================================================
-- Задача: Комплексная фильтрация чаев с расчетом скидки
-- Тема: Фильтрация данных в SQL
-- Цель: Выбрать чаи дороже 60 рублей, исключить чайный гриб, рассчитать цену со скидкой 25%

-- Используемые техники:
-- Множественные условия WHERE с AND
-- Комбинирование разных типов фильтрации
-- =====================================================

SELECT 
  product_id, 
  name, 
  price, 
  '25%' AS discount, 
  ROUND(price * 0.75, 2) AS new_price 
FROM 
  products 
WHERE 
  price > 60 
  AND name NOT LIKE 'чайный гриб' 
  AND name LIKE 'чай%' 
ORDER BY 
  product_id

-- Логика решения:
-- 1. name LIKE 'чай%' - отбирает все товары, начинающиеся на "чай"
-- 2. name NOT LIKE 'чайный гриб' - исключает конкретный нежелательный товар
-- 3. price > 60 - фильтрация по минимальной цене
-- 4. '25%' AS discount - текстовое представление скидки для отчетности
-- 5. price * 0.75 - расчет цены после применения 25% скидки

-- Пример результата:
-- product_id | name           | price | discount | new_price
-- 15         | чай зеленый    | 80.00 | 25%      | 60.00
-- 23         | чай черный     | 75.00 | 25%      | 56.25
-- 47         | чай улун       | 120.00| 25%      | 90.00