-- =====================================================
-- Задача: Фильтрация действий пользователей по ID и датам
-- Тема: Фильтрация данных в SQL
-- Цель: Вывести действия конкретных пользователей за определенный период

-- Используемые операторы:
-- IN - фильтрация по списку значений
-- BETWEEN - фильтрация по диапазону дат
-- ORDER BY DESC - сортировка по убыванию
-- =====================================================

SELECT 
  user_id, 
  order_id, 
  action, 
  time 
FROM 
  user_actions 
WHERE 
  user_id IN(170, 200, 230) 
  AND time BETWEEN '2022-08-25' 
  AND '2022-09-05' 
ORDER BY 
  order_id DESC

-- Логика решения:
-- 1. user_id IN (170, 200, 230) - выбирает действия трех конкретных пользователей
--    • Эквивалентно: user_id = 170 OR user_id = 200 OR user_id = 230
-- 2. time BETWEEN '2022-08-25' AND '2022-09-05' - выбирает период включительно
--    • Включает все время с 2022-08-25 00:00:00 по 2022-09-04 23:59:59
-- 3. ORDER BY order_id DESC - сортировка от самых новых заказов к старым

-- Пример результата:
-- user_id | order_id | action      | time
-- 230     | 10457    | create_order| 2022-09-04 14:30:15
-- 200     | 10456    | cancel_order| 2022-09-03 09:45:22
-- 170     | 10455    | create_order| 2022-09-02 18:15:08
-- 230     | 10452    | create_order| 2022-08-25 10:20:45