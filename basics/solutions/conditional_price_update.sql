-- =====================================================
-- Задача: Обновление цен по конкретным условиям
-- Цель: Применить повышение цен только к определенным товарам по заданным условиям

-- Используемые конструкции:
-- CASE WHEN - конструкция для работы с условиями
-- =====================================================

SELECT 
  product_id, 
  name, 
  price AS old_price, 
  CASE WHEN price <= 100 
  OR name = 'икра' THEN price WHEN price > 100 THEN price * 1.05 END AS new_price 
FROM 
  products 
ORDER BY 
  new_price DESC, 
  product_id

-- Логика решения:
-- 1. price <= 100 - исключаем дешевые товары из повышения
-- 2. name = 'икра' - специальное исключение для премиум-товара
-- 3. price > 100 - применяем повышение к оставшимся товарам

-- Пример результата:
-- product_id | name           | old_price | new_price
-- 105        | икра           | 800.00    | 800.00    (исключение)
-- 102        | iPhone 15      | 999.99    | 1049.9895 (повышение)
-- 107        | Молоко         | 89.99     | 89.99     (дешевый товар)
