-- =====================================================
-- Задача: Расчет средней цены с комплексной фильтрацией
-- Тема: Агрегация данных в SQL
-- Цель: Найти среднюю цену товаров категорий "чай" и "кофе", исключая специфические товары

-- Используемые функции:
-- AVG() - расчет среднего значения
-- ROUND() - округление результата
-- LIKE с комплексными условиями
-- =====================================================

SELECT 
  ROUND(
    AVG(price), 
    2
  ) AS avg_price 
FROM 
  products 
WHERE 
  (
    name LIKE '%чай%' 
    OR name LIKE '%кофе%'
  ) 
  AND (
    name NOT LIKE '%иван-чай%' 
    AND name NOT LIKE '%чайный гриб%'
  )